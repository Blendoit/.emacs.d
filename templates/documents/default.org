# -*- mode: org; eval: (visual-line-mode); -*-

# Hide Org mode tags
#+OPTIONS: tags:nil

#+LATEX_CLASS: article

# Ensure room for header and footer
#+LATEX_HEADER: \usepackage[left=1in,%
#+LATEX_HEADER:            right=1in,%
#+LATEX_HEADER:              top=1in,%
#+LATEX_HEADER:           bottom=1.75in]{geometry}

# Beautiful fonts ONLY
#+LATEX_HEADER: \usepackage{fontspec}
#+LATEX_HEADER: \setmainfont{Public Sans}
#+LATEX_HEADER: \setmonofont{Hack}

# Get total page count to insert in footer
#+LATEX_HEADER: \usepackage{lastpage}
#+LATEX_HEADER: \usepackage{titling}

# #+LATEX_HEADER: \usepackage{enumitem}
# #+LATEX_HEADER: \setlist{noitemsep}

# Required to reset numbering of table rows from table to table.
#+LATEX_HEADER: \usepackage{etoolbox}
#+LATEX_HEADER: \makeatletter
#+LATEX_HEADER: \gpreto\tabular{\renewcommand{\arraystretch}{1.4}\rownum=\z@}
#+LATEX_HEADER: \makeatother

# Headers and footers.
#+LATEX_HEADER: \usepackage{fancyhdr}
# Space in the header for a logo or image.
#+LATEX_HEADER: \setlength{\headheight}{36pt}
#+LATEX_HEADER_EXTRA: \pagestyle{fancy}
#+LATEX_HEADER_EXTRA: \fancyhead[L]{\rule[-12pt]{0pt}{0pt}\texttt{\theauthor}}
#+LATEX_HEADER_EXTRA: \fancyhead[C]{\large\textbf{\thetitle}}
#+LATEX_HEADER_EXTRA: \fancyhead[R]{\thedate}
#+LATEX_HEADER_EXTRA: \renewcommand{\headrulewidth}{1.5pt}
#+LATEX_HEADER_EXTRA: \fancyfoot[C]{\hrulefill\\[0.8em] Page \thepage/\pageref*{LastPage}\\[0.8em]\footnotesize Compiled with \includegraphics[width=1.618ex]{~/.emacs.d/img/icons/EmacsIcon.png}/\includegraphics[width=1.618ex]{~/.emacs.d/img/icons/Org-mode-unicorn.png}/\includegraphics[width=1.618ex]{~/.emacs.d/img/icons/LuaTeX_logo.png}/...\\ Copyright \copyright~2020 Marius Peter. All rights reserved.}

#+BEGIN_SRC emacs-lisp :exports none :cache no :results raw
  (concat "#+LATEX_HEADER_EXTRA:"
          "\\fancyfoot[C]{\\hrulefill\\\\[0.8em] "
          "Page \\thepage/\\pageref*{LastPage}\\\\[0.8em] "
          "\\footnotesize Compiled with"
          "\\includegraphics[width=1.618ex]{~/.emacs.d/img/icons/EmacsIcon.png}/"
          "\\includegraphics[width=1.618ex]{~/.emacs.d/img/icons/Org-mode-unicorn.png}/"
          "\\includegraphics[width=1.618ex]{~/.emacs.d/img/icons/LuaTeX_logo.png}/..."
          " On \\texttt{" (with-temp-buffer (org-insert-time-stamp (current-time)))
          "}\\\\ Copyright \\copyright~2020 Marius Peter. All rights reserved.}")
#+END_SRC

# #+RESULTS:
# #+LATEX_HEADER_EXTRA:\fancyfoot[C]{\hrulefill\\[0.8em] Page \thepage/\pageref*{LastPage}\\[0.8em] \footnotesize Compiled with\includegraphics[width=1.618ex]{~/.emacs.d/img/icons/EmacsIcon.png}/\includegraphics[width=1.618ex]{~/.emacs.d/img/icons/Org-mode-unicorn.png}/\includegraphics[width=1.618ex]{~/.emacs.d/img/icons/LuaTeX_logo.png}/... On \texttt{<2020-11-23 Mon>}\\ Copyright \copyright~2020 Marius Peter. All rights reserved.}
